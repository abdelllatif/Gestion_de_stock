<style>

    .mouvement:hover {
        color: #ef476f;
    }
</style>
<div class="d-flex flex-column h-100 justify-content-between " style="height: calc(100vh - 60px); padding-top: 60px; background-color: #232946;">
    <div style="overflow-y: auto; max-height: calc(100vh - 20px); scrollbar-width: thin;">
      <!--
      <h2 class="text-white text-center mb-4" style="font-family: 'Segoe UI', sans-serif; letter-spacing: 2px;">Dashboard</h2> -->
        <ul class="nav nav-pills flex-column mb-auto">
            <li class="nav-item mb-2">
                <a href="/" class="nav-link {% if activeLink == 'dashboard' %}text-white{% endif %}" style="{% if activeLink == 'dashboard' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-speedometer2 me-2"></i> Tableau de bord
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/utilisateur" class="nav-link {% if activeLink == 'utilisateur' %}text-white{% endif %}" style="{% if activeLink == 'utilisateur' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-people me-2"></i> Utilisateurs
                </a>
            </li>
            <li class="nav-item mb-2">
                <button type="button" id="stockMovementToggle" class="nav-link w-100 text-start {% if activeLink == 'stock_movement' %}text-white{% endif %}" style="{% if activeLink == 'stock_movement' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %} display: flex; align-items: center; justify-content: space-between;">
                    <span><i class="bi bi-box-seam me-2"></i> Mouvements de stock</span>
                    <span id="chevron" style="transition: transform 0.2s;">&#8250;</span>
                </button>
                <div id="stockMovementSubmenu" style="display: none; margin-left: 2.2rem;">
                    <a href="/stock/movement" class="d-block mb-1 mouvement" style="color:rgb(165, 177, 202); font-size: 0.80em; background: none;">Mouvement des articles</a>
                    <a href="/stock_movement/machine" class="d-block mouvement" style="color: rgb(165, 177, 202); font-size: 0.80em; background: none;">Mouvement des machines</a>
                </div>
            </li>
            <li class="nav-item mb-2">
                <a href="/machine" class="nav-link {% if activeLink == 'machine' %}text-white{% endif %}" style="{% if activeLink == 'machine' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-gear me-2"></i> Machines
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/facture" class="nav-link {% if activeLink == 'facture' %}text-white{% endif %}" style="{% if activeLink == 'facture' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-receipt me-2"></i> Factures
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/depot" class="nav-link {% if activeLink == 'depot' %}text-white{% endif %}" style="{% if activeLink == 'depot' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-house-door me-2"></i> Dépôts
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/commande_client" class="nav-link {% if activeLink == 'commande_client' %}text-white{% endif %}" style="{% if activeLink == 'commande_client' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-cart me-2"></i> Commandes Clients
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/client" class="nav-link {% if activeLink == 'client' %}text-white{% endif %}" style="{% if activeLink == 'client' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-person-badge me-2"></i> Clients
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/chauffeur" class="nav-link {% if activeLink == 'chauffeur' %}text-white{% endif %}" style="{% if activeLink == 'chauffeur' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-truck me-2"></i> Chauffeurs
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/chantier" class="nav-link {% if activeLink == 'chantier' %}text-white{% endif %}" style="{% if activeLink == 'chantier' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-building me-2"></i> Chantiers
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/bon" class="nav-link {% if activeLink == 'bon' %}text-white{% endif %}" style="{% if activeLink == 'bon' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-file-earmark-text me-2"></i> Bons
                </a>
            </li>
            <li class="nav-item mb-2">
                <a href="/article" class="nav-link {% if activeLink == 'article' %}text-white{% endif %}" style="{% if activeLink == 'article' %}background: linear-gradient(90deg, #1e3a8a, #3b82f6); border-radius: 8px;{% else %}border-radius: 8px;{% endif %}">
                    <i class="bi bi-archive me-2"></i> Articles
                </a>
            </li>
        </ul>
    </div>
    <div class="text-center text-secondary small mt-4">
        <span>© {{ "now"|date("Y") }} Big Enterprise</span>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var toggle = document.getElementById('stockMovementToggle');
    var submenu = document.getElementById('stockMovementSubmenu');
    var chevron = document.getElementById('chevron');
    if (toggle) {
        toggle.addEventListener('click', function() {
            if (submenu.style.display === 'none' || submenu.style.display === '') {
                submenu.style.display = 'block';
                chevron.style.transform = 'rotate(90deg)';
            } else {
                submenu.style.display = 'none';
                chevron.style.transform = 'rotate(0deg)';
            }
        });
    }
    // Optionally, open submenu if activeLink is stock_movement
    {% if activeLink == 'stock_movement' %}
    submenu.style.display = 'block';
    chevron.style.transform = 'rotate(90deg)';
    {% endif %}
});
</script>
